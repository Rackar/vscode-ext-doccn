(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{261:function(s,t,n){"use strict";n.r(t);var a=n(17),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"示例：hello-world"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#示例：hello-world"}},[s._v("#")]),s._v(" 示例：Hello World")]),s._v(" "),n("h2",{attrs:{id:"你的第一个插件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#你的第一个插件"}},[s._v("#")]),s._v(" 你的第一个插件")]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v('本节通过Hello World这个完整的项目手把手教你掌握VS Code扩展性概念。\n在本项目中，我们会给VS Code添加一个新的命令，虽然只是用来显示"Hello World"信息。在本节的最后，你将和编辑器编辑器互动，查找用户选中的文本。')]),s._v(" "),n("h4",{attrs:{id:"预备工作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#预备工作"}},[s._v("#")]),s._v(" 预备工作")]),s._v(" "),n("p",[s._v("请查看"),n("a",{attrs:{href:"/extension-authoring/extension-generator?id=%E9%A2%84%E5%85%88%E5%87%86%E5%A4%87"}},[s._v("生成插件-预备工作")])]),s._v(" "),n("h4",{attrs:{id:"生成新插件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#生成新插件"}},[s._v("#")]),s._v(" 生成新插件")]),s._v(" "),n("p",[s._v("请查看"),n("a",{attrs:{href:"/extension-authoring/extension-generator?id=%E8%BF%90%E8%A1%8Cyo-code%F0%9F%98%8E"}},[s._v("生成插件-运行Yo")])]),s._v(" "),n("h2",{attrs:{id:"运行插件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#运行插件"}},[s._v("#")]),s._v(" 运行插件")]),s._v(" "),n("hr"),s._v(" "),n("ul",[n("li",[s._v("打开VS Code，选择"),n("code",[s._v("文件")]),s._v(">"),n("code",[s._v("打开文件夹")]),s._v("，选择你刚刚生成的项目目录")]),s._v(" "),n("li",[s._v("点击"),n("code",[s._v("F5")]),s._v("或者"),n("code",[s._v("Debug")]),s._v("按钮，然后点击"),n("code",[s._v("开始")])]),s._v(" "),n("li",[s._v("新的VS Code实例会运行在特殊环境中（"),n("code",[s._v("Extension Development Host")])]),s._v(" "),n("li",[s._v("按下"),n("code",[s._v("⇧⌘P")]),s._v("(windows "),n("code",[s._v("shift + ctrl + p")]),s._v(")，输入命令"),n("code",[s._v("Hello world")])]),s._v(" "),n("li",[s._v("恭喜！你的第一个VS Code插件执行成功了")])]),s._v(" "),n("p",[n("img",{attrs:{src:"https://raw.githubusercontent.com/Microsoft/vscode-docs/master/docs/extensions/images/example-hello-world/running.png",alt:""}})]),s._v(" "),n("h2",{attrs:{id:"插件的目录结构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#插件的目录结构"}},[s._v("#")]),s._v(" 插件的目录结构")]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("构建完毕之后，你的插件开发目录看起来应该是这样的")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v(".\n├── .gitignore\n├── .vscode                     // VS Code 文件\n│   ├── launch.json\n│   ├── settings.json\n│   └── tasks.json\n├── .vscodeignore               // 发布插件时忽略的文件\n├── README.md\n├── src\n│   └── extension.ts            // 插件的入口（源文件）\n├── test                        // 测试文件夹\n│   ├── extension.test.ts       // extension.test.js, 如果是 JavaScript 插件的话\n│   └── index.ts                // index.js, 如果是 JavaScript 插件的话\n├── node_modules\n│   ├── vscode                  // 包含了vscode插件开发时的类型定义文件\n│   └── typescript              // typescript的编译器 (TypeScript only)\n├── out                         // 编译出口 (TypeScript only)\n│   ├── extension.js            // 插件入口\n│   ├── extension.js.map\n│   └── test\n│       ├── extension.test.js\n│       ├── extension.test.js.map\n│       ├── index.js\n│       └── index.js.map\n├── package.json                // 插件清单\n├── tsconfig.json               // jsconfig.json, 如果是 JavaScript 插件的话\n└── vsc-extension-quickstart.md // 快速上手插件开发\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br")])]),n("p",[s._v("让我们看看这些文件夹都是干什么用的：")]),s._v(" "),n("h4",{attrs:{id:"插件清单：package-json"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#插件清单：package-json"}},[s._v("#")]),s._v(" 插件清单："),n("code",[s._v("package.json")])]),s._v(" "),n("ul",[n("li",[s._v("每个VS Code插件都有"),n("code",[s._v("package.json")]),s._v("文件，文件内包含了这个插件功能和用处。")]),s._v(" "),n("li",[s._v("当项目启动时，VS Code会立即读取这个文件中的每个"),n("code",[s._v("配置(contributes)")]),s._v("部分并作出响应。")]),s._v(" "),n("li",[s._v("请阅读"),n("RouterLink",{attrs:{to:"/extensibility-reference/extension-manifest.html"}},[s._v("package.json插件清单")]),s._v("参考文档")],1),s._v(" "),n("li",[s._v("更多信息请参阅"),n("RouterLink",{attrs:{to:"/extensibility-reference/contribution-points.html"}},[s._v("package.json发布内容配置")]),s._v("参考文档")],1)]),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("译者注")]),s._v(" "),n("p",[s._v("为了便于理解，"),n("code",[s._v("contribution / contributes")]),s._v("在本教程中译为"),n("strong",[s._v("发布内容配置/配置")]),s._v("，"),n("code",[s._v("contribution points")]),s._v("译为"),n("strong",[s._v("发布内容配置点/配置点")]),s._v("。")])]),s._v(" "),n("p",[n("strong",[s._v("示例：基于TypeScript的pacakge.json")])]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"myFirstExtension"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"description"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0.0.1"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"publisher"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"engines"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"vscode"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^1.5.0"')]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"categories"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Other"')]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"activationEvents"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"onCommand:extension.sayHello"')]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"main"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./out/extension"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"contributes"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"commands"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"command"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"extension.sayHello"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"title"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello World"')]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"vscode:prepublish"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tsc -p ./"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"compile"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tsc -watch -p ./"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"postinstall"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node ./node_modules/vscode/bin/install"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"test"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node ./node_modules/vscode/bin/test"')]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"devDependencies"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n       "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"typescript"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^2.0.3"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"vscode"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^1.5.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"mocha"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^2.3.3"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"@types/node"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^6.0.40"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"@types/mocha"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^2.2.32"')]),s._v("\n   "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br")])]),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),n("p",[s._v("基于JavaScript的插件没有scripts部分，因为不需要编译。")])]),s._v(" "),n("p",[s._v("这份"),n("code",[s._v("package.json")]),s._v("文件说了什么呢？")]),s._v(" "),n("ul",[n("li",[s._v("**配置部分(contributes)**给"),n("em",[s._v("命令面板")]),s._v("定义了一个叫做"),n("code",[s._v("Hello world")]),s._v("的入口，它会调用'extension.sayHello'。")]),s._v(" "),n("li",[s._v('当命令"extension.sayHello"调用时，执行'),n("code",[s._v("loaded")]),s._v("(激活事件)请求。")]),s._v(" "),n("li",[s._v('在"'),n("code",[s._v("./out/extension.js")]),s._v('"中，存放着我们的主文件。')])]),s._v(" "),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),n("p",[s._v("VS Code "),n("strong",[s._v("不会一启动就加载插件")]),s._v("。插件必须在"),n("code",[s._v("activationEvents")]),s._v("中描述它的启动时机，比如"),n("code",[s._v("loaded")]),s._v("事件。")])]),s._v(" "),n("h4",{attrs:{id:"生成的代码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#生成的代码"}},[s._v("#")]),s._v(" 生成的代码")]),s._v(" "),n("p",[s._v("自动生成的代码存放在"),n("strong",[s._v("extension.ts")]),s._v("（或者"),n("strong",[s._v("extension.js")]),s._v("中）。")]),s._v(" "),n("div",{staticClass:"language-typescript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-typescript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 'vscode'模块包含了VS Code extensibility API")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 按下述方式导入这个模块")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" vscode "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'vscode'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 一旦你的插件激活，vscode会立刻调用下述方法")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("activate")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("context"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" vscode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ExtensionContext")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 用console输出诊断信息(console.log)和错误(console.error)")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 下面的代码只会在你的插件激活时执行一次")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("console")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Congratulations, your extension \"my-first-extension\" is now active!'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 入口命令已经在package.json文件中定义好了，现在调用registerCommand方法")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// registerCommand中的参数必须与package.json中的command保持一致")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" disposable "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" vscode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("commands"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("registerCommand")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'extension.sayHello'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 把你的代码写在这里，每次命令执行时都会调用这里的代码")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 给用户显示一个消息提示")]),s._v("\n        vscode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("showInformationMessage")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Hello World!'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("subscriptions"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("push")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("disposable"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br")])]),n("ul",[n("li",[s._v("每个插件都应该在主文件中注册一个"),n("code",[s._v("activate()")]),s._v("函数，因为这个函数只会调用一次。你只有"),n("code",[s._v("在package.json")]),s._v("中注册了"),n("code",[s._v("activationEvents")]),s._v("列表中的事件，激活事件才会被调用。")]),s._v(" "),n("li",[s._v("如果插件使用了系统资源(如：生成进程），则需要从主文件中导出名为"),n("code",[s._v("deactive()")]),s._v("的函数去清理释放这些资源，VS Code会在关闭时调用这个方法。")]),s._v(" "),n("li",[s._v('这个插件导入了VS Code API，然后注册了"extension.sayHello"命令和回调函数，执行后在VS Code中显示一条"Hello World!"消息。')])]),s._v(" "),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),n("p",[n("code",[s._v("package.json")]),s._v("的"),n("code",[s._v("contributes")]),s._v("部分给"),n("em",[s._v("命令面板")]),s._v("添加了一个调用入口。"),n("code",[s._v("extension.ts/.js")]),s._v("定义了"),n("code",[s._v("extension.sayHello")]),s._v("的实现。对于 Typescript类型的插件来说，生成的"),n("code",[s._v("out/extension.js")]),s._v("会在运行时加载。")])]),s._v(" "),n("h4",{attrs:{id:"其他文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#其他文件"}},[s._v("#")]),s._v(" 其他文件")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("vscode/launch.json")]),s._v(" 告诉VS Code启用插件开发模式。它也描述了"),n("code",[s._v(".vscode/tasks.json")]),s._v("中需要Typescript编译器的预加载任务。")]),s._v(" "),n("li",[n("code",[s._v("vscode/settings.json")]),s._v(" 默认排除外部文件夹。你如果想隐藏一些文件，可以修改这个配置。")]),s._v(" "),n("li",[n("code",[s._v("gitignore")]),s._v(" - 告诉git不跟踪哪些文件。")]),s._v(" "),n("li",[n("code",[s._v("vscodeignore")]),s._v(" - 告诉打包工具，发布插件时应该忽略哪些文件。")]),s._v(" "),n("li",[n("code",[s._v("README.md")]),s._v(" - 为插件的使用用户提供良好的文档。")]),s._v(" "),n("li",[n("code",[s._v("vsc-extension-quickstart.md")]),s._v(" - 你的快速开始指南。")]),s._v(" "),n("li",[n("code",[s._v("test/extension.test.ts")]),s._v(" - 把你的单元测试放在这里，看看和VS Code API有哪些出入。")])]),s._v(" "),n("h2",{attrs:{id:"插件激活过程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#插件激活过程"}},[s._v("#")]),s._v(" 插件激活过程")]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("我们刚刚已经了解了开发目录下的每个文件，现在我们看看你的插件是怎么运行起来的：")]),s._v(" "),n("ol",[n("li",[s._v("插件开发环境发现了这个插件，然后读取它的"),n("code",[s._v("package.json")])]),s._v(" "),n("li",[s._v("你按下"),n("code",[s._v("ctrl shift p")]),s._v("时，"),n("em",[s._v("命令面板")]),s._v("显示出已注册的命令列表")]),s._v(" "),n("li",[s._v("在列表中你找到"),n("code",[s._v("package.json")]),s._v("中定义的"),n("code",[s._v("Hello world")]),s._v("命令入口")]),s._v(" "),n("li",[s._v("选中并执行"),n("code",[s._v("Hello world")]),s._v('，随即执行真实的"'),n("code",[s._v("extension.sayHello")]),s._v('"命令\n'),n("ul",[n("li",[s._v("创建"),n("code",[s._v('"onCommand:extension.sayHello"')]),s._v("激活事件")]),s._v(" "),n("li",[s._v("激活所有注册在"),n("code",[s._v("activationEvents")]),s._v("的事件\n"),n("ul",[n("li",[s._v("Javascript虚拟机加载"),n("code",[s._v("./out/extension.js")]),s._v("文件")]),s._v(" "),n("li",[s._v("VS Code查找导出的"),n("code",[s._v("activate")]),s._v("函数，并调用")])])])])]),s._v(" "),n("li",[s._v("调用"),n("code",[s._v('"extension.sayHello"')]),s._v("注册的函数")]),s._v(" "),n("li",[s._v('函数执行，显示出"Hello world"消息')])]),s._v(" "),n("h2",{attrs:{id:"调试插件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#调试插件"}},[s._v("#")]),s._v(" 调试插件")]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("直接在你的代码里打上断点就可以调试了，很简单吧。")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://raw.githubusercontent.com/Microsoft/vscode-docs/master/docs/extensions/images/example-hello-world/hitbp.png",alt:"调试"}})]),s._v(" "),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),n("p",[s._v("VS Code具有解析sourcemap的能力，所以你可以直接在Typescript代码中调试。")])]),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("小提示")]),s._v(" "),n("p",[s._v("调试控制台(Debug Console)能输出所有console打印的日志。")])]),s._v(" "),n("p",[s._v("查看更多关于插件"),n("RouterLink",{attrs:{to:"/extension-authoring/developing-extensions.html"}},[s._v("开发环境")]),s._v("的东西。")],1),s._v(" "),n("h2",{attrs:{id:"小小的改造"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#小小的改造"}},[s._v("#")]),s._v(" 小小的改造")]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("试着修改你的"),n("code",[s._v("extension.ts")]),s._v("（或者"),n("code",[s._v("extension.js")]),s._v("）中"),n("code",[s._v("extension.sayHello")]),s._v("的实现，我们把它改造成一个对选中文本计数的功能。")]),s._v(" "),n("div",{staticClass:"language-typescript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-typescript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" disposable "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" vscode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("commands"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("registerCommand")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'extension.sayHello'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 每当你执行命令，这里的代码都会执行一次")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" editor "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" vscode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("activeTextEditor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("editor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 没有打开的编辑器")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" selection "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" editor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("selection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" text "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" editor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("getText")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("selection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 给用户一个消息提示框")]),s._v("\n    vscode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("showInformationMessage")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Selected characters: '")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" text"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("length"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),s._v(" "),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),n("p",[s._v("当你修改了代码，你需要按"),n("kbd",[s._v("Ctrl + R")]),s._v("(macOS "),n("kbd",[s._v("Cmd + R")]),s._v(")重启Extension Development Host，或者直接按VS Code上面的重启按钮")])]),s._v(" "),n("p",[s._v("新建一个文件，输入一些文本然后选中。当你运行"),n("strong",[s._v("Hello World")]),s._v("命令，你应该能看到字符计数的消息框。")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://raw.githubusercontent.com/Microsoft/vscode-docs/master/docs/extensions/images/example-hello-world/selection-length.png",alt:"文字计数"}})]),s._v(" "),n("h2",{attrs:{id:"在本地安装你的插件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#在本地安装你的插件"}},[s._v("#")]),s._v(" 在本地安装你的插件")]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("好了，现在你已经完成了一个运行在开发模式下的插件，为了让你的插件运行在所有VS Code实例中，你需要在本地插件目录下新建一个文件夹，然后复制过去：")]),s._v(" "),n("ul",[n("li",[s._v("Windows: "),n("code",[s._v("%USERPROFILE%\\.vscode\\extensions")])]),s._v(" "),n("li",[s._v("macOS/Linux: "),n("code",[s._v("$HOME\\.vscode\\extensions")])])]),s._v(" "),n("h2",{attrs:{id:"发布插件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#发布插件"}},[s._v("#")]),s._v(" 发布插件")]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("参阅"),n("RouterLink",{attrs:{to:"/extension-authoring/publish-extension.html"}},[s._v("分享插件")])],1),s._v(" "),n("h2",{attrs:{id:"下一步"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#下一步"}},[s._v("#")]),s._v(" 下一步")]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("在本篇指引中，我们实现了一个小小的插件。在"),n("RouterLink",{attrs:{to:"/extension-authoring/docs/extension-authoring/example-word-count.html"}},[s._v("示例-Word Count")]),s._v("中你能找到完整的例子，学习如何在Markdown文件中监听编辑器的文档变动事件、显示文本字数。")],1),s._v(" "),n("p",[s._v("如果你想查看更多extension API的概述，看看这些主题吧：")]),s._v(" "),n("ul",[n("li",[n("RouterLink",{attrs:{to:"/extensibility-reference/overview.html"}},[s._v("Extension API 概览")]),s._v(" - 了解完整的VS Code扩展性模型。")],1),s._v(" "),n("li",[n("RouterLink",{attrs:{to:"/extensibility-reference/principles-patterns.html"}},[s._v("API原则和模式")]),s._v(" - VS Code的扩展性基于这些指导性原则和模式。")],1),s._v(" "),n("li",[n("RouterLink",{attrs:{to:"/extensibility-reference/contribution-points.html"}},[s._v("发布内容配置")]),s._v(" - 各种各样的VS Code发布内容配置项")],1),s._v(" "),n("li",[n("RouterLink",{attrs:{to:"/extensibility-reference/activation-events.html"}},[s._v("激活事件")]),s._v(" - VS Code激活事件参考")],1),s._v(" "),n("li",[n("RouterLink",{attrs:{to:"/extension-authoring/samples.html"}},[s._v("更多插件示例")]),s._v(" - 看看我们的插件示例列表")],1)])])}),[],!1,null,null,null);t.default=e.exports}}]);