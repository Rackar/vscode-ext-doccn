(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{268:function(s,a,n){"use strict";n.r(a);var t=n(17),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"激活事件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#激活事件"}},[s._v("#")]),s._v(" 激活事件")]),s._v(" "),n("p",[n("strong",[s._v("激活事件")]),s._v("是在"),n("code",[s._v("package.json")]),s._v("中的"),n("code",[s._v("activationEvents")]),s._v("字段声明的一个JSON对象, 参考"),n("a",{attrs:{href:"/references/extension-manifest"}},[s._v("插件清单")]),s._v(". 当"),n("strong",[s._v("激活事件")]),s._v("触发时, 插件就会被激活. 下面是可用的"),n("strong",[s._v("激活事件")]),s._v("列表:")]),s._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"#onlanguage"}},[s._v("onLanguage")])]),s._v(" "),n("li",[n("a",{attrs:{href:"#oncommand"}},[s._v("onCommand")])]),s._v(" "),n("li",[n("a",{attrs:{href:"#ondebug"}},[s._v("onDebug")]),s._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"#ondebuginitialconfigurations"}},[s._v("onDebugInitialConfigurations")])]),s._v(" "),n("li",[n("a",{attrs:{href:"#onDebugResolve"}},[s._v("onDebugResolve")])])])]),s._v(" "),n("li",[n("a",{attrs:{href:"#workspacecontains"}},[s._v("workspaceContains")])]),s._v(" "),n("li",[n("a",{attrs:{href:"#onfilesystem"}},[s._v("onFileSystem")])]),s._v(" "),n("li",[n("a",{attrs:{href:"#onview"}},[s._v("onView")])]),s._v(" "),n("li",[n("a",{attrs:{href:"#onuri"}},[s._v("onUri")])]),s._v(" "),n("li",[n("a",{attrs:{href:"#onwebviewpanel"}},[s._v("onWebviewPanel")])]),s._v(" "),n("li",[n("a",{attrs:{href:"#Start-up"}},[s._v("*")])])]),s._v(" "),n("p",[n("code",[s._v("package.json")]),s._v("的配置项都可以在"),n("a",{attrs:{href:"/references/extension-manifest"}},[s._v("插件清单")]),s._v("中找到.")]),s._v(" "),n("h2",{attrs:{id:"onlanguage"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#onlanguage"}},[s._v("#")]),s._v(" onLanguage")]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("打开特定语言文件时激活事件和相关插件")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("...\n"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"activationEvents"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"onLanguage:python"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n...\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[n("code",[s._v("onLanguage")]),s._v("事件需要指定特定的"),n("a",{attrs:{href:"https://code.visualstudio.com/docs/languages/identifiers",target:"_blank",rel:"noopener noreferrer"}},[s._v("语言标识符"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("也可以添加多种语言:")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"activationEvents"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"onLanguage:json"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"onLanguage:markdown"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"onLanguage:typescript"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h2",{attrs:{id:"oncommand"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#oncommand"}},[s._v("#")]),s._v(" onCommand")]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("调用命令时激活")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("...\n"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"activationEvents"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"onCommand:extension.sayHello"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n...\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h2",{attrs:{id:"ondebug"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ondebug"}},[s._v("#")]),s._v(" onDebug")]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("调试会话(debug session)启动前激活")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("...\n"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"activationEvents"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"onDebug"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n...\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h3",{attrs:{id:"ondebuginitialconfigurations"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ondebuginitialconfigurations"}},[s._v("#")]),s._v(" onDebugInitialConfigurations")]),s._v(" "),n("h3",{attrs:{id:"ondebugresolve"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ondebugresolve"}},[s._v("#")]),s._v(" onDebugResolve")]),s._v(" "),n("p",[s._v("这是两个粒度更细的"),n("code",[s._v("onDebug")]),s._v("激活事件:")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("DebugConfigurationProvider")]),s._v("中的"),n("code",[s._v("provideDebugConfigurations")]),s._v("在"),n("code",[s._v("onDebugInitialConfigurations")]),s._v("之后触发")]),s._v(" "),n("li",[n("code",[s._v("onDebugResolve:type")]),s._v("在"),n("code",[s._v("DebugConfigurationProvider")]),s._v("的"),n("code",[s._v("resolveDebugConfiguration")]),s._v("方法之前触发.")])]),s._v(" "),n("p",[n("strong",[s._v("友情提示")]),s._v(": 如果调试插件比较轻量, 使用"),n("code",[s._v("onDebug")]),s._v(". 相反, 根据"),n("code",[s._v("DebugConfigurationProvider")]),s._v("实现的对应方法（"),n("code",[s._v("provideDebugConfigurations")]),s._v("或"),n("code",[s._v("resolveDebugConfiguration")]),s._v("），使用"),n("code",[s._v("onDebugInitialConfigurations")]),s._v("或"),n("code",[s._v("onDebugResolve")]),s._v(". 参阅"),n("a",{attrs:{href:"/extension-guides/debugger-extension#using-a-debugconfigurationprovider"}},[s._v("使用调试器插件")]),s._v(".")]),s._v(" "),n("h2",{attrs:{id:"workspacecontains"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#workspacecontains"}},[s._v("#")]),s._v(" workspaceContains")]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("文件夹打开后，且文件夹中至少包含一个符合glob模式的文件时触发.")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"activationEvents"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"workspaceContains:**/.editorconfig"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h2",{attrs:{id:"onfilesystem"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#onfilesystem"}},[s._v("#")]),s._v(" onFileSystem")]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("以协议（scheme）打开文件或文件夹时触发。通常是"),n("code",[s._v("file")]),s._v("-协议，也可以用自定义的文件供应器函数替换掉，比如"),n("code",[s._v("ftp")]),s._v("、"),n("code",[s._v("ssh")]),s._v(".")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("...\n"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"activationEvents"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"onFileSystem:sftp"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n...\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h2",{attrs:{id:"onview"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#onview"}},[s._v("#")]),s._v(" onView")]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("指定id的视图展开时触发:")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("...\n"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"activationEvents"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"onView:nodeDependencies"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n...\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h2",{attrs:{id:"onuri"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#onuri"}},[s._v("#")]),s._v(" onUri")]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("插件的系统级URI打开时触发。这个URI协议需要带上"),n("code",[s._v("vscode")]),s._v("或者 "),n("code",[s._v("vscode-insiders")]),s._v("协议。URI主机名必须是插件的唯一标识，剩余的URI是可选的。")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("...\n"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"activationEvents"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"onUri"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n...\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("如果"),n("code",[s._v("vscode.git")]),s._v("插件定义了"),n("code",[s._v("onUri")]),s._v("激活事件，那么下列任意URI打开时就会触发:")]),s._v(" "),n("ul",[n("li",[n("code",[s._v("vscode://vscode.git/init")])]),s._v(" "),n("li",[n("code",[s._v("vscode://vscode.git/clone?url=https%3A%2F%2Fgithub.com%2FMicrosoft%2Fvscode-vsce.git")])]),s._v(" "),n("li",[n("code",[s._v("vscode-insiders://vscode.git/init")]),s._v("(for VS Code Insiders)")])]),s._v(" "),n("h2",{attrs:{id:"onwebviewpanel"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#onwebviewpanel"}},[s._v("#")]),s._v(" onWebviewPanel")]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("VS Code需要恢复匹配到"),n("code",[s._v("viewType")]),s._v("的"),n("code",[s._v("webview")]),s._v("视图时触发.")]),s._v(" "),n("p",[s._v("下面是一个例子:")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"activationEvents"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n  ..."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"onWebviewPanel:catCoding"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("这会导致插件被激活. 调用"),n("code",[s._v("window.createWebviewPanel")]),s._v("时可以设置"),n("code",[s._v("viewType")]),s._v(", 你可能会需要其它的激活事件(比如: "),n("code",[s._v("onCommand")]),s._v(")来创建"),n("code",[s._v("webview")]),s._v("视图.")]),s._v(" "),n("h2",{attrs:{id:"start-up"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#start-up"}},[s._v("#")]),s._v(" Start up")]),s._v(" "),n("hr"),s._v(" "),n("p",[s._v("当VS Code启动时触发。为了保证良好的用户体验，只在你的插件没有其他任何激活事件的前提下，添加这个激活事件。")]),s._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[s._v("...\n"),n("span",{pre:!0,attrs:{class:"token property"}},[s._v('"activationEvents"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n...\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),s._v(" "),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),n("p",[s._v("一个插件如果侦听了多个激活事件, 那么最好用"),n("code",[s._v('"*"')]),s._v("替换掉.")])]),s._v(" "),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),n("p",[s._v("插件"),n("strong",[s._v("必须")]),s._v("从它的主模块中输出一个"),n("code",[s._v("activate()")]),s._v("函数，当任意的激活事件触发时，VS Code会"),n("strong",[s._v("仅仅调用一次这个函数")]),s._v("。此外，插件也"),n("strong",[s._v("应该")]),s._v(" 导出一个"),n("code",[s._v("deactivate()")]),s._v("函数，当VS Code关闭时执行清理的任务。如果清理进程是异步的，插件的"),n("code",[s._v("deactivate()")]),n("strong",[s._v("必须")]),s._v("返回一个Promise。如果这个清理任务是同步的，那么"),n("code",[s._v("deactivate()")]),s._v("可以返回"),n("code",[s._v("undefined")]),s._v("。")])])])}),[],!1,null,null,null);a.default=e.exports}}]);